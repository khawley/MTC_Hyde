/*1349661932,173213485*/

if (window.CavalryLogger) { CavalryLogger.start_js(["tVS1W"]); }

__d("ButtonGroup",["function-extensions","copyProperties","createArrayFrom","CSS","DataStore","Parent"],function(a,b,c,d,e,f){b('function-extensions');var g=b('copyProperties'),h=b('createArrayFrom'),i=b('CSS'),j=b('DataStore'),k=b('Parent'),l='firstItem',m='lastItem';function n(s,t){var u=k.byClass(s,t);if(!u)throw new Error('invalid use case');return u;}function o(s){return i.shown(s)&&h(s.childNodes).some(i.shown);}function p(s){var t,u,v;h(s.childNodes).forEach(function(w){v=o(w);i.removeClass(w,l);i.removeClass(w,m);i.conditionShow(w,v);if(v){t=t||w;u=w;}});t&&i.addClass(t,l);u&&i.addClass(u,m);i.conditionShow(s,t);}function q(s,t){var u=n(t,'uiButtonGroupItem');s(u);p(u.parentNode);}function r(s){this._root=n(s,'uiButtonGroup');j.set(this._root,'ButtonGroup',this);p(this._root);}r.getInstance=function(s){var t=n(s,'uiButtonGroup'),u=j.get(t,'ButtonGroup');return u||new r(t);};g(r.prototype,{hideItem:q.curry(i.hide),showItem:q.curry(i.show),toggleItem:q.curry(i.toggle)});e.exports=r;});
var SubscribeButton=window.SubscribeButton||(function(){return {SUBSCRIBED:'FollowingUser',UNSUBSCRIBED:'UnfollowingUser',init:function(a,b,c,d,e){Event.listen(b,'click',function(){Arbiter.inform(SubscribeButton.SUBSCRIBED,{profile_id:d});});Arbiter.subscribe(SubscribeButton.SUBSCRIBED,function(f,g){if(d===g.profile_id){if(!e)c.suppressNextMouseEnter();a.swap();}});Arbiter.subscribe(SubscribeButton.UNSUBSCRIBED,function(f,g){if(d===g.profile_id){a.unswap();c.hideFlyout();Arbiter.inform('SubMenu/Reset');}});},initUnsubscribe:function(a,b){Event.listen(a,'click',function(){Arbiter.inform.bind(Arbiter,SubscribeButton.UNSUBSCRIBED,{profile_id:b}).defer();});}};})();
__d("TimelineFriendsNavHovercard",["event-extensions","Hovercard","UserAgent"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Hovercard'),h=b('UserAgent');function i(event){var k=event.getTarget();g.processNode(k)&&event.stop();}var j={init:function(k){if(h.ie()<7)return;Event.listen(k,'mouseover',i);}};e.exports=j;});
__d("TimelineNavigation",["event-extensions","Arbiter","DOM","CSS","PageTransitions","Parent","TimelineController","TimelineURI","URI","$","createArrayFrom","ge"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('DOM'),i=b('CSS'),j=b('PageTransitions'),k=b('Parent'),l=b('TimelineController'),m=b('TimelineURI'),n=b('URI'),o=b('$'),p=b('createArrayFrom'),q=b('ge'),r=4,s=110,t=20,u=119,v=328,w=10,x=3,y=false,z=21,aa,ba,ca,da=[],ea=[],fa,ga=0,ha,ia=0,ja=0,ka,la=r,ma=false,na=false,oa=null,pa,qa=false,ra,sa,ta=false;function ua(ib,jb,kb){if(!jb.firstChild){h.remove(jb);return;}ea.push(jb);xa(kb.recent);i.removeClass(k.byTag(jb,'li'),'empty');if(fa&&(ia>r||ja>0))i.removeClass(fa,'notready');wa();if(kb.async){bb();db();}}function va(ib,jb,kb){h.remove(k.byTag(jb,'li'));if(!kb.async){ka++;}else{ia--;bb();db();}wa();}function wa(){var ib=fa?0:z;if(ia<=r){var jb=v+u*Math.max(0,r-ia)+ib;ha.style.width=jb+'px';la=ia;ya();}}function xa(ib){if(ib){ja++;}else ia++;ya();}function ya(){if(!ra)return;var ib=Math.max(0,ia-r)+ja;if(ga&&fa){h.setContent(ga,ib===0?" ":ib);i.conditionClass(fa,'fbTimelineMoreButtonZero',ib===0);if(!ma)i.conditionShow(fa,ib>0);}}function za(){var ib=h.scry(o('fbTimelineNavTopRow'),'li.tile'),jb=0,kb=0,lb=Math.max(0,r-la),mb=false;for(var nb=0;nb<ib.length;nb++){if(ib[nb]==ha||ib[nb]==fa)continue;mb=((jb+lb)%r===0);i.conditionClass(ib[nb],'leftMost',(jb!==0&&mb));if(!i.hasClass(ib[nb],'empty'))kb=jb;jb++;}mb=((kb+1+lb)%r===0);var ob=ib.length-1-lb;if(mb){if(ma&&(kb+1+lb)/r<x){ob=Math.min(ob,kb+r);na=true;}else ob=kb;}else{var pb=((kb+1+lb)%r);ob=kb+(r-pb);na=false;}nb=0;for(nb=0;nb<=ob;nb++)if(ib[nb]&&(ib[nb]==ha||ib[nb]==fa)){ob++;}else ib[nb]&&i.hasClass(ib[nb],'empty')&&i.removeClass(ib[nb],'hidden_elem');}function ab(ib,jb,kb){var lb=h.scry(ib,'li.tile');if(!jb)jb=0;var mb=false;for(var nb=jb;nb<lb.length;nb++){mb=((nb-kb)%r===0);var ob=lb[nb];i.conditionClass(ob,'leftMost',mb);if(i.hasClass(ob,'empty'))i.removeClass(ob,'hidden_elem');}}function bb(){za();var ib=q('fbTimelineNavSecondaryRow');ib&&ab(ib,0,0);}function cb(){if(!fa)return;if(i.hasClass(fa,'notready'))return;i.toggleClass(fa,'fbTimelineMoreButtonOpen');var ib=q('fbRecentAppTitle');ib&&i.conditionClass(ib,'hidden_elem',ja===0);if(i.hasClass(fa,'fbTimelineMoreButtonOpen')){bb();}else ya();db();}function db(){if(fa&&!i.hasClass(fa,'fbTimelineMoreButtonOpen')){aa.style.height='';i.removeClass(aa,'expanded');}else{var ib=ia+(r-la),jb=((ja>0)?w:0)+s*(Math.ceil(ja/r))+s*(Math.ceil(ib/r))+s*(na?1:0)+t;i.addClass(aa,'expanded');aa.style.height=jb+'px';}}function eb(ib){var jb=ib==m.TIMELINE_KEY||ib==m.WALL_KEY,kb=k.byClass(aa,'fbTimelineTopSectionBase'),lb=q('timeline_tour_toolbar');if(fa){i.removeClass(fa,'fbTimelineMoreButtonOpen');db();}lb&&i.conditionShow(lb,jb);if(kb)i.conditionClass(kb,'collapsedHead',!jb);}function fb(event){if(ta)return true;if(!k.byTag(event.getTarget(),'a')){var ib=h.find(ha,'a.title');j.go(ib.href);}}function gb(){if(fa)(function(){fa.removeAttribute('ajaxify');fa.removeAttribute('rel');}).defer();oa&&oa.remove();}var hb={UPDATE_PAGE:'TimelineNavigation/updatePage',init:function(ib,jb,kb,lb){if(y)return;y=true;aa=ib;fa=jb;ba=n.getRequestURI();ha=h.find(aa,'li.about');eb(l.getCurrentKey());ma=lb;g.inform(hb.UPDATE_PAGE);if(fa){ga=h.find(fa,'div.text');oa=Event.listen(fa,'click',gb);}pa=o('fbTimelineNavigationLoadContainer');h.appendContent(o('content'),pa);sa=Event.listen(ha,'click',fb);da.forEach(function(nb){if(!nb[2].remove){ua.apply(this,nb);}else va.apply(this,nb);});da=[];var mb=k.byClass(ib,'fbTimelineSection');if(mb)h.scry(mb,'ul.uiButtonGroup').forEach(function(nb){p(nb.childNodes).forEach(function(ob){ob.childNodes.length||h.remove(ob);});if(nb.firstChild){i.addClass(nb.firstChild,'firstItem');}else h.remove(nb);});l.register(l.NAV,hb);},reset:function(){sa&&sa.remove();sa=null;ra&&ra.remove();ra=null;y=false;aa=null;ca=null;ea=[];fa=null;ga=null;ha=null;ia=0;ja=0;ka=0;la=r;ma=false;na=false;pa=null;qa=false;ta=false;},initializeMorePager:function(){if(ra)return;if(fa)ra=Event.listen(fa,'click',cb);},registerNav:function(ib,jb,kb){y?(kb.remove?va.apply(this,arguments):ua.apply(this,arguments)):da.push(arguments);},redraw:function(){bb();db();},setEditMode:function(ib){ta=ib;}};e.exports=hb;});
__d("TimelineStickyHeaderNav",["array-extensions","event-extensions","function-extensions","Arbiter","ButtonGroup","CSS","DOM","Parent","Selector","Style","TimelineConstants","TimelineController","TimelineLegacySections","URI","UserAgent","Vector","ge","tx"],function(a,b,c,d,e,f){b('array-extensions');b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('ButtonGroup'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('Selector'),m=b('Style'),n=b('TimelineConstants'),o=b('TimelineController'),p=b('TimelineLegacySections'),q=b('URI'),r=b('UserAgent'),s=b('Vector'),t=b('ge'),u=b('tx'),v=false,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha={},ia={},ja=[],ka=false,la=[],ma=[],na=[],oa=[],pa=[],qa=["January","February","March","April","May","June","July","August","September","October","November","December"];function ra(event){var gb=k.byTag(event.getTarget(),'a');if(gb){o.navigateToSection(gb.getAttribute('data-key'));event.prevent();}}function sa(gb,hb){var ib=l.getValue(hb);if(ib==='allStories')p.get(gb).expandSubSections();if(ib!=='activityLog')ta(hb);}function ta(gb){db(gb,'highlights');db(gb,'allStories');var hb=j.find(gb,'li.separator');i.conditionShow(hb,hb.previousSibling);}function ua(gb){if(ea[gb]&&!x.custom_subsection_menu){ab(gb);}else xa();o.adjustStickyHeaderWidth();}function va(gb,hb){var ib=hb.key;if(fa[ib]){bb(ib);ua(ib);}}function wa(gb,hb){var ib=hb.scrubberKey;bb(ib);if(y===ib)ua(ib);}function xa(){z.hideItem(ca);}function ya(gb){var hb=gb.split('_');return qa[hb.pop()-1];}function za(gb){var hb=da[gb],ib=ea[gb];if(!hb&&ib){hb=da[gb]=ca.cloneNode(true);var jb=j.scry(hb,'li.activityLog a')[0];if(jb)jb.href=q(jb.href).addQueryData({key:gb});var kb=o.getCurrentScrubber();if(ib.length)i.show(j.find(hb,'li.separator'));for(var lb=0;lb<ib.length;lb++){var mb=ib[lb].scrubberKey,nb=kb?kb.getLabelForSubnav(ib[lb].parentKey,mb):nb=ya(mb);if(nb)cb(hb,{key:mb,label:nb});}if(eb()){ta(hb);l.setSelected(hb,j.scry(hb,'option')[1].value,true);}pa.push(l.listen(hb,'change',sa.curry(gb,hb)));na.push(Event.listen(hb,'click',ra));}return hb;}function ab(gb){var hb=za(gb);j.insertAfter(ca,hb);i.hide(ca);for(var ib in da){var jb=da[ib];i.conditionShow(jb,jb===hb);}z.showItem(ca);}function bb(gb){ea[gb]=p.get(gb).subSections;}function cb(gb,hb){var ib=j.create('a',{href:'#',rel:'ignore',className:'itemAnchor',tabIndex:0},j.create('span',{className:'itemLabel fsm'},hb.label));ib.setAttribute('data-key',hb.key);ib.setAttribute('aria-checked',false);var jb=j.create('li',{className:'uiMenuItem uiMenuItemRadio uiSelectorOption'},ib);jb.setAttribute('data-label',hb.label);var kb=j.find(gb,'ul.uiMenuInner'),lb=j.create('option',{value:hb.key},hb.label),mb=j.find(gb,'select');if(hb.key==='recent'){j.prependContent(kb,jb);j.insertAfter(mb.options[0],lb);}else{j.appendContent(kb,jb);j.appendContent(mb,lb);}}function db(gb,hb){var ib=j.scry(gb,'li.uiMenuItem');if(!ib)return;for(var jb=0;jb<ib.length;jb++){var kb=ib[jb];if(i.hasClass(kb,hb)||kb.firstChild.getAttribute('data-key')==hb){j.remove(kb);break;}}var lb=j.find(gb,'select'),mb=j.scry(lb,'option');for(jb=0;jb<mb.length;jb++)if(mb[jb].value===hb){j.remove(mb[jb]);return;}}function eb(){return o.getCurrentKey()==='allactivity'||o.getCurrentKey()==='approve';}var fb={init:function(gb,hb){if(v)return;v=true;w=gb;x=hb||{};aa=j.find(w,'div.pageMenu');ba=j.find(w,'div.sectionMenu');ca=j.find(w,'div.subsectionMenu');ga=j.find(aa,'li.uiMenuSeparator');z=h.getInstance(aa);da={};ea={};fa={};fb.adjustMenuHeights();o.register(o.STICKY_HEADER_NAV,fb);ma.forEach(function(ib){ib();});},reset:function(){v=false;x={};ja=[];ha={};ia={};ka=false;la=[];w=null;aa=null;ba=null;ca=null;ga=null;da={};ea={};fa={};while(na.length)na.pop().remove();oa.forEach(g.unsubscribe);pa.forEach(l.unsubscribe.bind(l));},addTimePeriods:function(gb){if(!gb.length)return;if(x.pull_from_scrubber){j.setContent(j.find(ba,'ul.uiMenuInner'),'');j.remove(j.find(ba,'select').children[1]);while(gb.length){var hb=gb.shift();hb&&fb.addTimePeriod(hb);}z.showItem(ba);}var ib=l.getSelectorMenu(ba);na.push(Event.listen(ib,'click',ra));var jb=eb()?n.SECTION_REGISTERED:n.SECTION_LOADED,kb=eb()?wa:va;oa.push(g.subscribe(jb,kb));},addTimePeriod:function(gb){var hb=o.getCurrentScrubber();if(!hb)return;var ib=hb.getLabelForNav(gb);if(!ib)return;cb(ba,{key:gb,label:ib});var jb=j.find(ba,'ul.uiMenuInner');if(gb==='recent'||jb.children.length<2)l.setSelected(ba,gb,true);},updateSection:function(gb,hb){if(hb){var ib=za(gb);if(ib){l.setSelected(ib,hb);ta(ib);}else y=gb;}else{fa[gb]=true;bb(gb);}l.setSelected(ba,gb,true);ua(gb);},adjustMenuHeights:function(){if(r.ie()<=7)return;[aa,ba].forEach(function(gb){var hb='';if(!i.hasClass(document.documentElement,'tinyViewport')){hb=s.getViewportDimensions().y-s.getElementDimensions(t('blueBar')).y-80;hb+='px';}m.set(j.find(gb,'ul.uiMenuInner'),'maxHeight',hb);});},initPageMenu:function(gb,hb){if(!v){ma.push(fb.initPageMenu.curry(gb,hb));return;}function ib(jb,kb){jb.forEach(function(lb){var mb=ia[lb]=j.create('li');i.hide(mb);kb?j.insertBefore(ga,mb):j.appendContent(j.find(aa,'ul.uiMenuInner'),mb);});}ib(gb,true);ib(hb,false);ha.info=j.scry(aa,'li')[0];ja=hb;ka=true;if(la.length)la.forEach(function(jb){fb.registerPageMenuItem(jb.key,jb.item);});},registerPageMenuItem:function(gb,hb){if(!ka){la.push({key:gb,item:hb});return;}if(ia[gb]){j.replace(ia[gb],hb);ha[gb]=hb;delete ia[gb];if(ja.indexOf(gb)>=0)i.show(ga);}},removeTimePeriod:function(gb){db(ba,gb);}};e.exports=fb;});
__d("SwapButton",["event-extensions","copyProperties","CSS"],function(a,b,c,d,e,f){b('event-extensions');var g=b('copyProperties'),h=b('CSS');function i(j,k,l){this._swapperButton=j;this._swappeeButton=k;Event.listen(j,'click',this.swap.bind(this));if(l)Event.listen(k,'click',this.unswap.bind(this));}g(i.prototype,{_swapperButton:null,_swappeeButton:null,swap:function(){h.hide(this._swapperButton);h.show(this._swappeeButton);},unswap:function(){h.show(this._swapperButton);h.hide(this._swappeeButton);},toggle:function(){h.toggle(this._swapperButton);h.toggle(this._swappeeButton);}});e.exports=i;});
__d("HoverButton",["AsyncRequest","CSS","DOM","URI","copyProperties"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('URI'),k=b('copyProperties');function l(m,n,o,p){this._button=m;this._flyout=n;this._flyoutAjaxify=p;this._flyoutContent=o;n.subscribe('show',this._onShow.bind(this));n.subscribe('hide',this._onHide.bind(this));}k(l.prototype,{_button:null,_flyout:null,_flyoutAjaxify:null,_flyoutContent:null,showFlyoutBriefly:function(){this.showFlyout();this._flyout.hideFlyoutDelayed(5000);},showFlyout:function(){this._flyout.showFlyout(this._button,true);this._flyout.inform('show',this._button);},hideFlyout:function(){this._flyout.hideFlyout(true);this._flyout.inform('hide',this._button);},_onShow:function(m,n){h.addClass(n,'uiHoverButtonSelected');h.addClass(n,'selected');if(this._flyoutAjaxify){h.addClass(this._flyoutContent,'async_saving');new g().setURI(new j(this._flyoutAjaxify)).setHandler(function(o){h.removeClass(this._flyoutContent,'async_saving');i.setContent(this._flyoutContent,o.payload);}.bind(this)).send();this._flyoutAjaxify=null;}},_onHide:function(m,n){h.removeClass(n,'uiHoverButtonSelected');h.removeClass(n,'selected');},destroy:function(){this.hideFlyout();this._flyout.destroy();},suppressNextMouseEnter:function(){this._flyout.setActiveNode(this._button);}});e.exports=l;});
__d("legacy:dom-collect",["collectDataAttributes"],function(a,b,c,d){a.collect_data_attribs=b('collectDataAttributes');},3);
__d("DialogHideOnSuccess",["copyProperties","CSS","cx"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('CSS'),i=b('cx');function j(k){this._layer=k;}g(j.prototype,{_subscription:null,enable:function(){this._subscription=this._layer.subscribe('success',this._handle.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_handle:function(k,event){if(h.hasClass(event.getTarget(),"_s"))this._layer.hide();}});e.exports=j;});
__d("ContextualDialogArrow",["CSS","DOM","Locale","Style","Vector","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('Locale'),j=b('Style'),k=b('Vector'),l=b('copyProperties'),m=b('cx'),n=15,o=16,p={bottom:"_k8",top:"_k9",right:"_ka",left:"_kb"},q={above:'bottom',below:'top',left:'right',right:'left'};function r(s){this._layer=s;}l(r.prototype,{_subscription:null,_arrow:null,enable:function(){this._subscription=this._layer.subscribe(['adjust','reposition'],this._handle.bind(this));},disable:function(){this._subscription.unsubscribe();this._subscription=null;},_handle:function(s,t){if(s==='adjust'){this._repositionArrow(t);}else this._repositionRoot(t);},_repositionRoot:function(s){var t=this._layer.getRoot();if(!s.isVertical()){var u=parseInt(j.get(t,'top'),10);u-=n;j.set(t,'top',u+'px');}},_repositionArrow:function(s){var t=this._layer._contentWrapper,u=0,v=s.getAlignment(),w=s.getPosition();if(w=='above'||w=='below')if(v=='center'){u=50;}else if(v=='right')u=100;var x=q[w];for(var y in p)g.conditionClass(t,p[y],x===y);if(w=='none')return;if(!this._arrow){this._arrow=this._drawArrow();h.appendContent(t,this._arrow);}g.conditionClass(t,"_kc",this._layer.getFooter());j.set(this._arrow,'top','');j.set(this._arrow,'left','');j.set(this._arrow,'right','');j.set(this._arrow,'margin','');var z=x=='top'||x=='bottom',aa=z?(i.isRTL()?'right':'left'):'top';j.set(this._arrow,aa,u+'%');var ba=0;if(v!='center'){ba=n;if(z){var ca=this._layer.getContext(),da=k.getElementDimensions(ca).x;if(da<o+(n*2))ba=Math.max((da/2)-(o/2),0);}}ba+=o*u/100;if(v!='left')ba*=-1;j.set(this._arrow,'margin-'+aa,ba+'px');},_drawArrow:function(){return h.create('i',{className:"_kd"});}});r.OFFSET=n;r.LENGTH=o;e.exports=r;});
__d("ContextualDialogFitInViewport",["event-extensions","ContextualDialogArrow","ContextualLayerDimensions","Style","Vector","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('ContextualDialogArrow'),h=b('ContextualLayerDimensions'),i=b('Style'),j=b('Vector'),k=b('copyProperties'),l=g.OFFSET,m=g.LENGTH,n=l+m;function o(p){this._layer=p;}k(o.prototype,{_scrollListener:null,_subscription:null,_minimumTop:null,enable:function(){this._subscription=this._layer.subscribe(['show','hide','reposition'],function(p,q){if(p=='reposition'){this._calculateMinimumTop(q);}else if(p=='show'){this._attachScroll();this._adjustForScroll();}else this._detachScroll();}.bind(this));if(this._layer.isShown())this._attachScroll();},disable:function(){if(this._layer.isShown())this._detachScroll();this._subscription.unsubscribe();this._subscription=null;},_attachScroll:function(){this._scrollListener=Event.listen(this._layer.getContextScrollParent()||window,'scroll',this._adjustForScroll.bind(this));},_detachScroll:function(){this._scrollListener.remove();this._scrollListener=null;},_getContentHeight:function(){return j.getElementDimensions(this._layer._contentWrapper).y;},_getContextY:function(){return j.getElementPosition(this._layer.getContext()).y;},_calculateMinimumTop:function(p){if(p.isVertical())return;this._minimumTop=(this._getContextY()-(this._getContentHeight()-n)+p.getOffsetY());},_adjustForScroll:function(){var p=this._layer._getOrientation();if(p.isVertical())return;var q=h.getViewportRect(this._layer),r=q.b-this._minimumTop;if(r<0)return;var s=this._getContentHeight(),t=s-(n+l),u=Math.max(0,Math.min(t,t-(r-s)));i.set(this._layer.getContent(),'top',-u+'px');}});e.exports=o;});
__d("ContextualDialog",["AccessibleLayer","Class","ContextualDialogFitInViewport","ContextualLayer","CSS","DOM","LayerButtons","LayerFormHooks","LayerMouseHooks","Style","copyProperties","csx","cx"],function(a,b,c,d,e,f){var g=b('AccessibleLayer'),h=b('Class'),i=b('ContextualDialogFitInViewport'),j=b('ContextualLayer'),k=b('CSS'),l=b('DOM'),m=b('LayerButtons'),n=b('LayerFormHooks'),o=b('LayerMouseHooks'),p=b('Style'),q=b('copyProperties'),r=b('csx'),s=b('cx');function t(u,v){this.parent.construct(this,u,v);}h.extend(t,j);q(t.prototype,{_footer:null,_configure:function(u,v){u.addedBehaviors.push(u.arrowBehavior);var w=l.scry(v,"div._k7");if(w.length)this._footer=w[0];this.parent._configure(u,v);},_getDefaultBehaviors:function(){return this.parent._getDefaultBehaviors().concat([g,i,m,n,o]);},_buildWrapper:function(u,v){k.addClass(v,"_k5");var w=this.parent._buildWrapper(u,v);k.addClass(this._contentWrapper,"_k6");if(u.width)this.setWidth(u.width);return w;},setWidth:function(u){this._width=Math.floor(u);p.set(this._contentWrapper,'width',u+'px');return this;},getFooter:function(){return this._footer;}});q(t,{setContext:function(u,v){u.setContext(v);}});e.exports=t;});
__d("SubscriptionLevels",[],function(a,b,c,d,e,f){var g={ALL:'162318810514679',DEFAULT:'271670892858696',TOP:'266156873403755'};e.exports=g;});
__d("EditSubscriptions",["event-extensions","function-extensions","Arbiter","AsyncRequest","CSS","DOM","ge","Menu","Parent","SubscriptionLevels"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('ge'),l=b('Menu'),m=b('Parent'),n=b('SubscriptionLevels'),o=13,p=45,q=[n.ALL,n.DEFAULT,n.TOP],r={},s={},t={},u={},v={},w={},x={},y={},z={},aa={},ba={},ca="/ajax/follow/follow_profile.php",da="/ajax/follow/unfollow_profile.php",ea="/ajax/settings/notifications/notify_me.php",fa={},ga={},ha=null,ia=false;function ja(gb){return q.contains(gb);}function ka(gb,hb,ib,jb){var kb=m.byClass(jb,'uiMenuItem')||m.byClass(jb,'uiMenuXItem');if(!kb||!j.contains(gb,kb)){return;}else if(i.hasClass(kb,'SubscribeMenuSubscribeCheckbox')){if(t[hb]){na(gb,hb);}else ma(gb,hb);return false;}else if(i.hasClass(kb,'SubscribeMenuUnsubscribe')){na(gb,hb);return false;}else if(i.hasClass(kb,'SubscribeMenuSettingsItem')){ab(gb,true);return false;}else if(i.hasClass(kb,'SubscriptionMenuGoBack')){ab(gb,false);return false;}else if(i.hasClass(kb,'SubscriptionMenuItem')){la(gb,hb,ib,kb);return false;}else if(i.hasClass(kb,'SubscribeMenuNotifyMeCheckbox')){if(u[hb]){eb(gb,hb);}else db(gb,hb);return false;}}function la(gb,hb,ib,jb){if(i.hasClass(jb,'SubscriptionMenuLevel')){if(l.isItemChecked(jb))return;ya(gb,hb,ra(jb),true,ib);}else if(i.hasClass(jb,'SubscriptionMenuCategory')){va(hb,jb,!l.isItemChecked(jb),true,ib);}else if(i.hasClass(jb,'SubscriptionAppStory'))xa(hb,jb,!l.isItemChecked(jb),ib);}function ma(gb,hb){var ib={profile_id:hb};g.inform('FollowingUser',ib);new h().setURI(ca).setMethod('POST').setData({profile_id:hb,location:oa(gb)}).setErrorHandler(g.inform.curry('FollowUserFail',ib)).send();}function na(gb,hb){var ib={profile_id:hb};g.inform('UnfollowingUser',ib);new h().setURI(da).setMethod('POST').setData({profile_id:hb,location:oa(gb)}).setErrorHandler(g.inform.curry('UnfollowUserFail',ib)).send();}function oa(gb){if(i.hasClass(gb,'followButtonFlyout')){return o;}else return p;}function pa(gb,hb,ib){var jb={profile_id:gb,level:y[gb],custom_categories:z[gb],location:ib};new h().setURI('/ajax/follow/manage_subscriptions.php').setData(jb).send();}function qa(gb,hb){var ib=z[hb]||[],jb=l.getItems(gb);jb.forEach(function(kb){if(i.hasClass(kb,'SubscriptionMenuCategory')){var lb=ra(kb);if(ib.contains(lb)){ta(kb);}else ua(kb);}else if(i.hasClass(kb,'SubscriptionAppStory')){var mb=ra(kb);if(ga[hb]&&ga[hb][mb]){ta(kb);}else ua(kb);}});ya(gb,hb,y[hb],false);}function ra(gb){var hb=j.scry(gb,'input')[0];return hb&&hb.value;}function sa(gb){return j.find(gb,'a.itemAnchor');}function ta(gb){i.addClass(gb,'checked');sa(gb).setAttribute('aria-checked',true);}function ua(gb){i.removeClass(gb,'checked');sa(gb).setAttribute('aria-checked',false);}function va(gb,hb,ib,jb,kb){if(ib){ta(hb);}else ua(hb);var lb=ra(hb);if(ja(lb)){ib&&wa(gb,lb);}else if(ib){if(!z[gb].contains(lb))z[gb].push(lb);}else{var mb=z[gb].indexOf(lb);if(mb!==-1)z[gb].splice(mb,1);}if(jb)pa(gb,lb,kb);}function wa(gb,hb){y[gb]=hb;g.inform('SubscriptionLevelUpdated',{profile_id:gb,level:hb});}function xa(gb,hb,ib,jb){var kb='/ajax/feed/filter_action/',lb=ra(hb),mb={actor_id:gb,app_id:lb};if(ib){ta(hb);kb+='resubscribe_user_app/';mb.action='resubscribe_user_app';if(!ga[gb])ga[gb]={};ga[gb][lb]=true;}else{ua(hb);kb+='unsubscribe_user_app_checkbox/';mb.action='unsubscribe_user_app_checkbox';if(ga[gb])ga[gb][lb]=false;}new h().setURI(kb).setData(mb).send();}function ya(gb,hb,ib,jb,kb){var lb=j.scry(gb,'.SubscriptionMenuLevel'),mb=null;lb.forEach(function(nb){if(ra(nb)==ib){mb=nb;}else if(l.isItemChecked(nb))va(hb,nb,false,false);});mb&&va(hb,mb,true,jb,kb);}function za(gb,hb,ib){t[hb]=ib;i.conditionClass(gb,'isUnsubscribed',!ib);var jb=j.scry(gb,'li.SubscribeMenuSubscribeCheckbox');if(jb.length!==0){var kb=jb[0];if(ib){ta(kb);}else ua(kb);}}function ab(gb,hb){i.conditionClass(gb,'subscriptionMenuOpen',hb);}function bb(gb,hb,ib){var jb=j.find(gb,".FriendListSubscriptionsMenu"),kb=j.find(jb,".uiMenuInner");if(ha!=null)ha.forEach(function(lb){kb.removeChild(lb);});ib.forEach(function(lb){kb.appendChild(lb);});ha=ib;}g.subscribe('UnfollowUser',function(gb,hb){if(aa[hb.profile_id]){wa(hb.profile_id,aa[hb.profile_id]);z[hb.profile_id]=ba[hb.profile_id].slice();}});g.subscribe('UpdateSubscriptionLevel',function(gb,hb){var ib=hb.profile_id+'',jb=hb.level+'';wa(ib,jb);var kb;for(kb in r)if(r[kb]===ib){var lb=k(kb);lb&&ya(lb,ib,jb,false);}});function cb(gb,hb,ib){u[hb]=ib;var jb=w[hb]&&!ia,kb=j.scry(gb,'li.SubscribeMenuNotifyMeCheckbox');if(kb.length!==0){var lb=kb[0];i.conditionShow(lb,!jb);i.conditionShow(j.find(gb,'li.SubscribeMenuNotifyMeCheckboxSeparator'),!jb);if(ib){ta(lb);}else ua(lb);}}function db(gb,hb){var ib={profile_id:hb};g.inform('EnableNotifsForUser',ib);new h().setURI(ea).setMethod('POST').setData({notifier_id:hb,enable:true}).setErrorHandler(g.inform.curry('EnableNotifsForUserFail',ib)).send();}function eb(gb,hb){var ib={profile_id:hb};g.inform('DisableNotifsForUser',ib);new h().setURI(ea).setMethod('POST').setData({notifier_id:hb,enable:false}).setErrorHandler(g.inform.curry('DisableNotifsForUserFail',ib)).send();}var fb={init:function(gb,hb,ib){var jb=j.getID(gb);if(!r[jb])Event.listen(gb,'click',function(kb){return ka(gb,r[jb],ib,kb.getTarget());});if(ib===p&&fa[hb].length)bb(gb,hb,fa[hb]);if(y[hb])qa(gb,hb);r[jb]=hb;i.conditionClass(gb,'NonFriendSubscriptionMenu',!s[hb]);i.conditionClass(gb,'cannotSubscribe',!v[hb]);i.conditionClass(gb,'noSubscriptionLevels',w[hb]&&!x[hb]);i.conditionClass(gb,'noSubscribeCheckbox',!s[hb]&&!w[hb]);za(gb,hb,t[hb]);cb(gb,hb,u[hb]);g.subscribe(['FollowUser','FollowingUser','UnfollowUserFail'],function(kb,lb){za(gb,hb,true);}.bind(this));g.subscribe(['UnfollowUser','UnfollowingUser','FollowUserFail'],function(kb,lb){g.inform('SubMenu/Reset');za(gb,hb,false);}.bind(this));g.subscribe(['EnableNotifsForUser','DisableNotifsForUserFail'],function(kb,lb){cb(gb,hb,true);}.bind(this));g.subscribe(['DisableNotifsForUser','EnableNotifsForUserFail'],function(kb,lb){cb(gb,hb,false);}.bind(this));ab(gb,false);},getSubscriptions:function(gb){return {level:y[gb],custom_categories:z[gb]};},setSubscriptions:function(gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb){wa(gb,mb+'');s[gb]=hb;t[gb]=ib;v[gb]=jb;w[gb]=kb;x[gb]=lb;aa[gb]=ob+'';z[gb]=nb.map(String);ba[gb]=pb.map(String);fa[gb]=sb;u[gb]=qb;ia=rb;}};e.exports=a.EditSubscriptions||fb;});
__d("DynamicFriendListEducation",["event-extensions","Arbiter","AsyncRequest","Dialog","PageTransitions","createArrayFrom"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('Dialog'),j=b('PageTransitions'),k=b('createArrayFrom'),l,m,n,o,p,q;function r(){n&&n.hide();o&&o.hide();}function s(v){m.remove(v);r();p({accept_tag_education:true});}function t(){r();p({nux_cancel:true});}var u={init:function(v,w){l=v;m=k(w).map(String);j.registerHandler(function(){r();l=false;p=undefined;m=[];});},showDialog:function(v,w,x){if(l&&m.contains(v)){r();g.inform('DynamicFriendListEducation/dialogOpen',{uid:w,flid:v});p=x;n=new i().setAsync(new h('/ajax/friends/lists/smart_list_education.php').setMethod('GET').setData({flid:v,uid:w}).setReadOnly(true)).setHandler(s.bind(this,v)).setCloseHandler(function(){g.inform('DynamicFriendListEducation/dialogClosed',{uid:w,flid:v});}).setCancelHandler(function(){g.inform('DynamicFriendListEducation/dialogCancel',{uid:w,flid:v});}).show();}else x();},showContextualDialog:function(v,w,x,y){if(l&&m.contains(v)){r();q=x;p=y;new h('/ajax/friends/lists/smart_list_contextual_education.php').setMethod('GET').setData({flid:v,uid:w}).setReadOnly(true).send();}else y();},setContextualDialog:function(v,w,x,y){o=v;o.setContext(q);o.show();Event.listen(w,'click',s.bind(this,y));Event.listen(x,'click',t);}};e.exports=u;});
__d("FriendStatus",["array-extensions","function-extensions","Arbiter","AsyncRequest","copyProperties","createArrayFrom"],function(a,b,c,d,e,f){b('array-extensions');b('function-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('copyProperties'),j=b('createArrayFrom');function k(o,p,q){this.id=o;this.update(p,q);}i(k.prototype,{update:function(o,p){o&&(this.status=o);if(p){this.lists=j(p).map(String);this._informListChange();}},isComplete:function(){return !!this.lists;},addToList:function(o){if(this.lists&&!this.lists.contains(o))this.lists.push(o);this._informListChange();},removeFromList:function(o){if(this.lists){var p=this.lists.indexOf(o);p!==-1&&this.lists.splice(p,1);}this._informListChange();},updateList:function(o,p){p?this.addToList(o):this.removeFromList(o);},_informListChange:function(){g.inform('FriendListMembershipChange',{uid:this.id,lists:this.lists});}});i(k,{ARE_FRIENDS:1,INCOMING_REQUEST:2,OUTGOING_REQUEST:3,CAN_REQUEST:4});var l={},m={};function n(o,p,q){if(!l[q.uid]){l[q.uid]=new k(q.uid,o);}else l[q.uid].update(o);g.inform('FriendRequest/change',{uid:q.uid,status:o});}g.subscribe(['FriendRequest/cancel','FriendRequest/unfriend','FriendRequest/sendFail'],n.curry(k.CAN_REQUEST));g.subscribe(['FriendRequest/confirmFail'],n.curry(k.INCOMING_REQUEST));g.subscribe(['FriendRequest/cancelFail','FriendRequest/sent','FriendRequest/sending'],n.curry(k.OUTGOING_REQUEST));g.subscribe(['FriendRequest/confirm','FriendRequest/confirming'],n.curry(k.ARE_FRIENDS));i(k,{CLOSE_FRIENDS:null,ACQUAINTANCES:null,getFriend:function(o,p){if(l[o]&&l[o].isComplete()){p(l[o]);}else if(m[o]){m[o].push(p);}else{m[o]=[p];new h().setURI("/ajax/friends/status.php").setData({friend:o}).setHandler(function(q){var r=q.getPayload();k.initFriend.bind(k,o,r.status,r.lists).defer();}).send();}},initFriend:function(o,p,q){var r=l[o]||new k(o);r.update(r.status||p,r.lists||q);l[o]=r;m[o]&&m[o].forEach(function(s){s(r);});m[o]=null;},setSpecialLists:function(o){k.CLOSE_FRIENDS=o.close+'';k.ACQUAINTANCES=o.acq+'';}});e.exports=k;});
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","DynamicFriendListEducation","EditSubscriptions","FriendStatus","Menu","Parent","ScrollableArea","URI","$","copyProperties","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOMQuery'),k=b('DynamicFriendListEducation'),l=b('EditSubscriptions'),m=b('FriendStatus'),n=b('Menu'),o=b('Parent'),p=b('ScrollableArea'),q=b('URI'),r=b('$'),s=b('copyProperties'),t=b('ge'),u=5,v={},w="/ajax/profile/removefriendconfirm.php",x='/ajax/friends/requests/cancel.php',y='/ajax/choose/',z;function aa(la,ma,na){var oa=v[la.id],pa=function(qa){var ra={action:na?'add_list':'del_list',to_friend:oa.id,friendlists:[ma],source:z};if(qa)s(ra,qa);oa.updateList(ma,na);var sa;if(na&&ma==m.CLOSE_FRIENDS){sa=da(la,m.ACQUAINTANCES);if(n.isItemChecked(sa)){n.toggleItem(sa);aa(la,m.ACQUAINTANCES,false);}}else if(na&&ma==m.ACQUAINTANCES){sa=da(la,m.CLOSE_FRIENDS);if(n.isItemChecked(sa)){n.toggleItem(sa);aa(la,m.CLOSE_FRIENDS,false);}}var ta={flid:ma,uid:oa.id},ua=na?'FriendListHovercard/add':'FriendListHovercard/remove';g.inform(ua,ta);new h().setURI('/ajax/add_friend/action.php').setData(ra).send();};if(na){k.showDialog(ma,oa.id,pa);}else pa();}function ba(la){var ma=j.scry(la,'input')[0];return ma&&ma.value;}function ca(la,ma,na){var oa={uid:ma.id};new h().setURI(x).setMethod('POST').setData({friend:ma.id}).setHandler(g.inform.bind(g,'FriendRequest/cancel',oa)).setErrorHandler(g.inform.bind(g,'FriendRequest/cancelFail',oa)).setStatusElement(na).send();}function da(la,ma){var na=n.getItems(la);for(var oa=0;oa<na.length;oa++)if(ba(na[oa])==ma)return na[oa];return null;}function ea(la,ma){var na=n.getItems(la);na.forEach(function(oa){var pa=ba(oa),qa=ma.lists.contains(pa);if(n.isItemChecked(oa)!==qa)n.toggleItem(oa);});}function fa(la){var ma=n.getItems(la),na=!i.hasClass(la,'followButtonFlyout')&&!i.hasClass(la,'likeButtonFlyout'),oa=[],pa=[],qa=0,ra=0;ma.forEach(function(wa){if(i.hasClass(wa,'neverHide')){i.removeClass(wa,'underShowMore');qa++;}else if(n.isItemChecked(wa)){oa.push(wa);}else if(i.hasClass(wa,'neverShow')||i.hasClass(wa,'FriendListCreateTrigger')||(!na&&i.hasClass(wa,'friendOptionsOnly'))){i.addClass(wa,'underShowMore');ra++;}else pa.push(wa);});var sa=u-qa,ta=oa.concat(pa),ua=ra;ta.forEach(function(wa){if(i.hasClass(wa,'ShowMoreItem')){sa--;return;}if(sa){i.removeClass(wa,'underShowMore');sa--;}else{i.addClass(wa,'underShowMore');ua=true;}});i.conditionClass(la,'hasMoreFriendListItems',ua);var va=j.scry(la,'.FriendListMenuShowMore');va.forEach(function(wa){i.removeClass(wa,'FriendListMenuShowMore');});}function ga(la,ma){i.conditionClass(la,'FriendListMemorializedUser',ma);}function ha(la,ma){i.conditionClass(la,'FriendListCannotSuggestFriends',!ma);}function ia(la,ma){var na=j.scry(la,'.FriendListUnfriend')[0],oa=j.scry(la,'.FriendListCancel')[0],pa=j.scry(la,'.FriendListSuggestFriends')[0];if(oa)i.conditionShow(oa,ma.status==m.OUTGOING_REQUEST);if(na){i.conditionShow(na,ma.status==m.ARE_FRIENDS);j.find(na,'a').setAttribute('ajaxify',q(w).addQueryData({uid:ma.id}).toString());}if(pa)j.find(pa,'a').setAttribute('href',q(y).addQueryData({type:'suggest_friends',newcomer:ma.id,ref:'profile_others_dropdown'}).toString());}function ja(la,ma){var na=j.scry(la,'div.FriendListSubscriptionsMenu');if(na.length!==0)l.init(la,ma,45);}g.subscribe('FriendRequest/change',function(la,ma){for(var na in v){var oa=t(na),pa=v[na];if(oa&&pa&&pa.id==ma.uid){ea(oa,pa);ia(oa,pa);fa(oa);}}});n.subscribe('select',function(la,ma){if(i.hasClass(ma.item,'ShowMoreItem')&&i.hasClass(ma.menu,'FriendListMenu')){i.addClass(ma.menu,'FriendListMenuShowMore');p.poke(ma.item);}});var ka={init:function(la,ma,na,oa,pa){la=r(la);z=na;if(!v[la.id])n.subscribe('select',function(qa,ra){if(j.contains(la,ra.item))if(o.byClass(ra.item,'FriendListItem')){n.toggleItem(ra.item);var sa=ba(ra.item);aa(la,sa,n.isItemChecked(ra.item));}else if(o.byClass(ra.item,'FriendListCancel')){ca(la,v[la.id],ra.item);}else if(o.byClass(ra.item,'FriendListUnfriend'))g.inform('FriendEditLists/unfriend');});i.addClass(la,'async_saving');m.getFriend(ma,function(qa){ga(la,oa);ha(la,pa);ea(la,qa);ia(la,qa);v[la.id]=qa;fa(la);ja(la,ma);i.removeClass(la,'async_saving');}.bind(this));}};e.exports=a.FriendEditLists||ka;});
__d("FriendListFlyoutController",["event-extensions","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","Dialog","DOM","FriendEditLists","FriendStatus","Layer","Parent","ScrollableArea","UserAgent","emptyFunction"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('Button'),j=b('ContextualLayer'),k=b('CSS'),l=b('DataStore'),m=b('Dialog'),n=b('DOM'),o=b('FriendEditLists'),p=b('FriendStatus'),q=b('Layer'),r=b('Parent'),s=b('ScrollableArea'),t=b('UserAgent'),u=b('emptyFunction'),v,w,x=null,y=null,z,aa,ba,ca,da,ea,fa=1500,ga={init:function(xa){ga.init=u;v=xa;v.subscribe('mouseenter',ha);v.subscribe('mouseleave',sa);v.subscribe('hide',ia);if(x)n.setContent(v.getContent(),[x,y]);var ya=function(za){var ab=r.byClass(za.getTarget(),'enableFriendListFlyout');if(ab)if(z===ab){clearTimeout(ca);}else{w&&ua();ra(ab);}};Event.listen(document.documentElement,{mouseover:ya,click:ya});g.subscribe('FriendEditLists/unfriend',ua);g.subscribe('DynamicFriendListEducation/dialogOpen',function(){ea=true;});g.subscribe('DynamicFriendListEducation/dialogClosed',function(){ea=false;sa();});},initContent:function(xa){n.appendContent(document.body,xa);(function(){if(!x){x=xa;v&&n.setContent(v.getContent(),[x,y]);k.show(x);Event.listen(x,'click',va);w&&oa(z);}else{n.remove(xa);xa=null;}}).defer();},initNux:function(xa){if(y)return;y=xa;v&&n.setContent(v.getContent(),[x,y]);},show:function(xa){pa(xa);},hide:function(xa){xa===false?ua():sa();},setActiveNode:function(xa){w&&ua();z=xa;aa=Event.listen(xa,'mouseleave',function(){z=null;aa&&aa.remove();});},setCloseListener:function(xa,ya){l.set(xa,'flfcloselistener',ya);if(z!=xa)l.set(xa,'flfcloselistenertimeout',wa.curry(xa).defer(fa));},setCloseListenerTimeout:function(xa){fa=xa;}};function ha(){clearTimeout(ca);}function ia(){if(z){k.removeClass(z,'selected');k.removeClass(z,'uiButtonHover');if(l.get(z,'flfcloselistener')){var xa=z;l.set(z,'flfcloselistenertimeout',wa.curry(xa).defer(fa));}}w=false;na();z=null;}function ja(xa){if(n.isNodeOfType(xa,'label')&&k.hasClass(xa,'uiButton'))xa=i.getInputElement(xa);return xa;}function ka(xa){return l.get(ja(xa),'profileid');}function la(xa){return l.get(ja(xa),'memorialized')==='true';}function ma(xa){return l.get(ja(xa),'cansuggestfriends')==='true';}function na(){aa&&aa.remove();aa=null;da&&q.unsubscribe(da);da=null;ca&&clearTimeout(ca);ca=null;}function oa(xa){var ya=ka(xa),za=la(xa),ab=ma(xa),bb=l.get(xa,'flloc');o.init(x,ya,bb,za,ab);k.conditionClass(x,'followButtonFlyout',k.hasClass(xa,'profileFollowButton'));k.conditionClass(x,'friendButtonFlyout',k.hasClass(xa,'FriendRequestFriends')||k.hasClass(xa,'FriendRequestIncoming')||k.hasClass(xa,'FriendRequestOutgoing'));k.conditionClass(x,'likeButtonFlyout',k.hasClass(xa,'profileLikeButton'));var cb=n.scry(x,'div.uiScrollableArea')[0];cb&&s.poke(cb);}function pa(xa){if(!v||w)return;v.setContext(xa);v.setCausalElement(xa);xa.setAttribute('aria-expanded','true');k.addClass(xa,'selected');k.addClass(xa,'uiButtonHover');v.show();z=xa;w=true;if(x){oa(xa);}else new h().setURI('/ajax/friends/lists/flyout_content.php').setStatusElement(v.getContent()).send();na();aa=Event.listen(xa,'mouseleave',sa);da=q.subscribe('show',qa);if(l.get(xa,'flfcloselistener'))clearTimeout(l.remove(xa,'flfcloselistenertimeout'));var ya=ka(xa);p.getFriend(ya,function(za){if(!y)return;if(za.status==p.OUTGOING_REQUEST){k.show(y);h.bootstrap('/ajax/friends/lists/nux_flyout.php',null,true);}else k.hide(y);});}function qa(xa,ya){if(!(ya instanceof j)||!n.contains(z,ya.getContext()))sa();}function ra(xa){z=xa;ba=pa.curry(xa).defer(350);aa=Event.listen(xa,'mouseleave',function(){clearTimeout(ba);z=null;aa&&aa.remove();});}function sa(){ca=ua.defer(150);}function ta(){var xa=m.getCurrent(),ya=xa&&xa.getBody();return !!(ya&&n.scry(ya,'.friendListDialogTourCarousel')[0]);}function ua(){if(ea||ta())return;t.ie()<8&&document.documentElement.focus();if(v){v.hide();var xa=v.getCausalElement();xa&&xa.setAttribute('aria-expanded','false');}}function va(event){var xa=r.byTag(event.getTarget(),'a');if(xa&&k.hasClass(xa,'FriendListActionItem'))sa();}function wa(xa){var ya=l.remove(xa,'flfcloselistener');ya&&ya();}e.exports=a.FriendListFlyoutController||ga;});
__d("legacy:FriendListFlyoutController",["FriendListFlyoutController"],function(a,b,c,d){a.FriendListFlyoutController=b('FriendListFlyoutController');},3);
__d("legacy:FriendStatus",["FriendStatus"],function(a,b,c,d){a.FriendStatus=b('FriendStatus');},3);
var AddFriendButton={ERROR_ALREADY_ADDED:1431005,init:function(a,b,c,d,e,f,g,h,i,j,k){var l=null,m=DOM.scry(a,'.addButton')[0],n=DOM.scry(a,'.addFriendText')[0],o=DOM.scry(a,'.outgoingButton')[0],p=DOM.scry(a,'.incomingButton')[0],q=DOM.scry(a,'.friendButton')[0];function r(w,x,y){var z=new URI(m.getAttribute('ajaxify'));link_data=collect_data_attribs(a,['ft','gt']);new AsyncRequest().setURI(f).setData({to_friend:b,action:w,how_found:d,ref_param:e,link_data:link_data,outgoing_id:o.id,xids:z.getQueryData().xids,logging_location:g,no_flyout_on_click:h,ego_log_data:i,http_referer:k}).setErrorHandler(x).setServerDialogCancelHandler(y).setRelativeTo(o).send();}function s(w,x){if(n){CSS.hide(n);}else if(m)CSS.hide(m);o&&CSS.hide(o);p&&CSS.hide(p);q&&CSS.hide(q);if(w)CSS.show(w);if('Outgoing'==x&&l!=x&&j)animation(w).from('backgroundColor','#FFF8CC').to('backgroundColor','transparent').from('borderColor','#FFE222').to('borderColor',Style.get(w,'borderLeftColor')).duration(2000).go();l&&CSS.removeClass(a,'fStatus'+l);l=x;CSS.addClass(a,'fStatus'+x);}function t(w){if(CSS.hasClass(w,'enableFriendListFlyout')){FriendListFlyoutController.show(w);}else FriendListFlyoutController.hide();}var u=Arbiter.subscribe('FriendRequest/change',function(w,x){if(x.uid!=b)return;switch(x.status){case FriendStatus.ARE_FRIENDS:return s(q,'Friends');case FriendStatus.INCOMING_REQUEST:return s(p,'Incoming');case FriendStatus.OUTGOING_REQUEST:return s(o,'Outgoing');case FriendStatus.CAN_REQUEST:return s(n?n:m,'Requestable');}}),v;if(c)v=Arbiter.subscribe('FriendRequest/confirm',function(w,x){x.uid==b&&goURI(c);});m&&Event.listen(m,'click',function(){Arbiter.inform('FriendRequest/sending',{uid:b});if(h){FriendListFlyoutController.setActiveNode(o);}else t(o);r("add_friend",function(w){var x=w.error==AddFriendButton.ERROR_ALREADY_ADDED?'FriendRequest/sent':'FriendRequest/sendFail';Arbiter.inform(x,{uid:b});FriendListFlyoutController.hide();AsyncResponse.defaultErrorHandler(w);},function(w){Arbiter.inform('FriendRequest/sendFail',{uid:b});FriendListFlyoutController.hide();});});PageTransitions.registerHandler(function(){u.unsubscribe();v&&v.unsubscribe();});}};
var FriendButtonIcon={init:function(a,b,c){var d=DOM.find(b,'.defaultIcon'),e=DOM.find(b,'.closeIcon'),f=DOM.find(b,'.acqIcon');Arbiter.subscribe('FriendListMembershipChange',function(g,h){if(h.uid==c){var i=h.lists.contains(FriendStatus.CLOSE_FRIENDS),j=h.lists.contains(FriendStatus.ACQUAINTANCES);if(i&&!j){Button.setIcon(a,e);}else if(j&&!i){Button.setIcon(a,f);}else Button.setIcon(a,d);}});}};
__d("legacy:EditSubscriptions",["SubscriptionLevels","EditSubscriptions"],function(a,b,c,d){a.SubscriptionLevels=b('SubscriptionLevels');a.EditSubscriptions=b('EditSubscriptions');},3);
__d("OGHovercardLayerHideOnBlur",["event-extensions","DOM","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('DOM'),h=b('copyProperties');function i(j){this._layer=j;}h(i.prototype,{_subscriptions:null,_clickListener:null,enable:function(){this._subscriptions=[this._layer.subscribe('show',this._attach.bind(this)),this._layer.subscribe('hide',this._detach.bind(this))];if(this._layer.isShown())this._attach();},disable:function(){this._detach();while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();this._subscriptions=null;},_detach:function(){this._clickListener&&this._clickListener.remove();this._clickListener=null;},_attach:function(){!function(){this._clickListener=Event.listen(document.documentElement,'click',this._maybeHide.bind(this));}.bind(this).defer();},_maybeHide:function(event){var j=event.getTarget();if(g.contains(this._layer.getContent(),j))return;if(this._shouldHide(event))this._layer.hide();},_shouldHide:function(event){return true;}});e.exports=i;});
__d("OGAggregationHovercardTarget",["event-extensions","AccessibleLayer","AsyncRequest","Class","ContextualDialog","ContextualDialogArrow","CSS","DOM","LayerDestroyOnHide","LayerFadeOnHide","LayerFadeOnShow","LayerHideOnBlur","OGHovercardLayerHideOnBlur","copyProperties","cx","tx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('AccessibleLayer'),h=b('AsyncRequest'),i=b('Class'),j=b('ContextualDialog'),k=b('ContextualDialogArrow'),l=b('CSS'),m=b('DOM'),n=b('LayerDestroyOnHide'),o=b('LayerFadeOnHide'),p=b('LayerFadeOnShow'),q=b('LayerHideOnBlur'),r=b('OGHovercardLayerHideOnBlur'),s=b('copyProperties'),t=b('cx'),u=b('tx'),v=350,w={},x=function(){var z=new j({addedBehaviors:[q],arrowBehavior:k},m.create('div',{className:"_4q1"},"Loading...")).setWidth(v);x=bagof(z);return z;};s(y,{setHovercard:function(z,aa){var ba=w[z];ba&&ba.setHovercard(aa);}});function y(z,aa,ba,ca,da){w[aa]=this;this._targetID=aa;this._endpoint=ba;this._preventClose=da||[];this.init(z);for(var ea=0,fa=ca.length;ea<fa;ea++){var ga=ca[ea];this.addTrigger(ga.element,ga.trigger_class,ga.context);}}s(y.prototype,{init:function(z){this._hovercardShown=false;this._hovercardScheduled=false;this._target=z;this._triggers=[];this._hovercard=null;this._fetching=false;this._placeholder=null;this._placeholderListener=null;this._shownClass='hover_shown';this._triggerClass=null;this._currentTrigger=null;this._context=null;return this;},addTrigger:function(z,aa,ba){this._triggers.push(z);Event.listen(z,'click',this._onTrigger.bind(this,z,aa,ba));},_onTrigger:function(z,aa,ba){ba=ba||this._target;if((this._hovercardShown&&(this._hovercard.getContext()===ba))||(this._hovercardScheduled&&(this._placeholder.getContext()===ba))||((this._hovercardShown||this._hovercardScheduled)&&(this._currentTrigger===z))){this._currentTrigger=null;this.hideHovercard();return;}this.hideHovercard();this._currentTrigger=z;this.showHovercard(aa,ba);},_fetch:function(){if(this._hovercard!=null||this._fetching)return;this._fetching=true;var z=function(){this._fetching=false;},aa=function(){this.hideHovercard();};new h(this._endpoint).setData({hover_target:this._targetID}).setMethod('GET').setReadOnly(true).setErrorHandler(aa.bind(this)).setTransportErrorHandler(aa.bind(this)).setFinallyHandler(z.bind(this)).send();},setHovercard:function(z){this._hovercard=z;var aa=function(ba){this.parent.construct(this,ba);};i.extend(aa,r);s(aa.prototype,{_shouldHide:function(event){var ba=event.getTarget();for(var ca=0,da=this._preventClose.length;ca<da;ca++)if(m.contains(this._preventClose[ca],ba))return false;return true;}.bind(this)});this._hovercard.setPosition('below').setAlignment('center').enableBehavior(aa);this._hovercard.subscribe('aftershow',this._onHovercardShow.bind(this));this._hovercard.subscribe('hide',this._onHovercardHide.bind(this));this._hovercard.subscribe('destroy',this._onHovercardDestroy.bind(this));if(this._hovercardScheduled)this.showHovercard(this._triggerClass,this._context);},showHovercard:function(z,aa){l.addClass(this._target,this._shownClass);if(this._triggerClass&&this._triggerClass!==z)l.removeClass(this._target,this._triggerClass);this._triggerClass=z;l.addClass(this._target,this._triggerClass);if(this._hovercard){this._hovercard.setContext(aa||this._target).show();this._hovercardShown=true;this._hovercardScheduled=false;this._hidePlaceholder();}else{this._context=aa;this._hovercardScheduled=true;this._fetch();this._showPlaceholder();}},hideHovercard:function(){this._hovercardScheduled=false;this._hidePlaceholder();if(this._hovercard){this._hovercard.hide();}else this._onHovercardHide();},_showPlaceholder:function(){if(!this._placeholder){this._placeholder=x();this._placeholder.setContext(this._context||this._target).setPosition('below').setAlignment('center').show();this._placeholderListener=this._placeholder.subscribe('hide',this._onPlaceholderHide.bind(this));}},_hidePlaceholder:function(){this._placeholder&&this._placeholder.hide();},_onPlaceholderHide:function(){if(this._placeholder){this._hovercardScheduled=false;this._placeholderListener&&this._placeholder.unsubscribe(this._placeholderListener);this._placeholder=null;!this._hovercardShown&&this._removeTriggerClasses();}},_onHovercardShow:function(){var z=this._hovercard.getContent(),aa=m.scry(z,'textarea.mentionsTextarea')[0];aa&&aa.focus();},_onHovercardHide:function(){this._hovercardShown=false;this._removeTriggerClasses();},_onHovercardDestroy:function(){this._hovercard=null;},_removeTriggerClasses:function(){l.removeClass(this._target,this._shownClass);l.removeClass(this._target,this._triggerClass);}});e.exports=y;});
__d("PhotoCurationControl",["event-extensions","Parent","Toggler"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Parent'),h=b('Toggler'),i={init:function(j){var k=g.byClass(j,'fbPhotoStarGridElement');Event.listen(k,'mouseleave',function(){h.hide();});}};e.exports=i;});
__d("PhotoInlineActions",["event-extensions","Arbiter","AsyncRequest","CSS","Parent","cx"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('Parent'),k=b('cx'),l={init:function(m,n,o,p){g.subscribe(['UFI/CommentAddedActive','UFI/CommentDeletedActive','UFI/LikeActive'],function(q,r){if(parseInt(m.getAttribute('data-fbid'),10)!==r)return;if(q==='UFI/LikeActive')i.toggleClass(m,"_53a");new h().setURI('/ajax/photos/photo/refresh.php').setData({fbid:m.getAttribute('data-fbid')}).setRelativeTo(m).send();});Event.listen(m,'click',function(event){var q=event.getTarget();if(!j.byClass(q,"_53b"))return;event.prevent();i.toggleClass(m,"_53a");new h().setURI('/ajax/photos/photo/like.php').setData({fbid:m.getAttribute('data-fbid'),relatedid:n,hovercardendpoint:o,includecommentlink:p}).setRelativeTo(m).setErrorHandler(function(){i.toggleClass(m,"_53a");}).send();});}};e.exports=l;});
__d("StarGridLayout",["copyProperties","Vector"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('Vector');function i(j){g(this,j);}g(i.prototype,{getShortestColumn:function(j){return j[0]<=j[1]?0:1;},getDangling:function(j){var k=j.filter(function(l){return !this.isStarred(l);}.bind(this));if(k.length%2===1)return k[k.length-1];return null;},mangleOrder:function(j){if(j.length<3||!(this.isFixed(j[0])&&this.isStarred(j[1])))return j;var k=this.nextNonStarred(j,2);if(!k)return j;var l=j.concat();l.remove(k);l.splice(1,0,k);return l;},layout:function(j){var k=[0,0],l=0,m=this.getDangling(j),n=[];j=this.mangleOrder(j);for(var o=0;o<j.length;++o){var p=this.getShortestColumn(k),q=j[o];if(this.isStarred(q)){this.renderStarred(this._grid,k,p,q);k[p]+=2;l=Math.max(l,(p*2)+2);}else{n.push(q);if(n.length===2||q===m){this.renderNonStarred(this._grid,k,p,n);l=Math.max(l,(p*2)+n.length);n=[];k[p]+=1;}}}return new h(l,Math.max.apply(null,k));},inNonStarredBlock:function(j,k,l,m){return k===l[m]&&Math.floor(j/2)===m;},inStarredBlock:function(j,k,l,m){return (k===l[m]||k===l[m]+1)&&Math.floor(j/2)===m;},nextNonStarred:function(j,k){for(;k<j.length;++k)if(!this.isStarred(j[k]))return j[k];return null;},layoutReorder:function(j,k,l,m){j=j.concat();l=Math.max(0,Math.min(3,l));m=Math.max(0,m);j.remove(k);j.push(k);var n=[0,0],o=this.getDangling(j),p=false,q=[];for(var r=0;r<j.length;++r){var s=this.getShortestColumn(n),t=j[r];if(this.isStarred(t)){if(t===k)p=true;if(!p&&this.isStarred(k)&&this.inStarredBlock(l,m,n,s)&&this.inNonStarredBlock(l,m,n,s)){j.remove(k);this.renderStarred(this._grid,n,s,k);n[s]+=2;s=this.getShortestColumn(n);p=true;}if(!p&&!this.isStarred(k)&&this.inStarredBlock(l,m,n,s)&&this.inNonStarredBlock(l,m,n,s)){j.remove(k);if(q.length===1){q.splice(l%2,0,k);}else{var u=this.nextNonStarred(j,r);if(u){j.remove(u);q.push(u);q.splice(l%2,0,k);}else q.push(k);}this.renderNonStarred(this._grid,n,s,q);q=[];n[s]+=1;o=this.getDangling(j.slice(r+1));s=this.getShortestColumn(n);p=true;}if(!p&&this.inStarredBlock(l,m,n,s)&&!this.inNonStarredBlock(l,m,n,s)){j.remove(k);var u=this.nextNonStarred(j,r);j.push(k);if(u){j.remove(u);j.splice(r,0,u);r--;continue;}m-=1;r--;continue;}this.renderStarred(this._grid,n,s,t);n[s]+=2;}else{q.push(t);if(q.length===2||t===o){if(!p&&!this.isStarred(k)&&this.inNonStarredBlock(l,m,n,s)){q.remove(k);j.remove(k);q.splice(l%2,0,k);if(q.length===3){j.remove(q[2]);j.splice(r,0,q[2]);r=j.indexOf(q[2])-1;q.pop();}o=this.getDangling(j.slice(r+1));p=true;}if(!p&&this.isStarred(k)&&this.inNonStarredBlock(l,m,n,s)){j.remove(k);this.renderStarred(this._grid,n,s,k);n[s]+=2;s=this.getShortestColumn(n);p=true;}this.renderNonStarred(this._grid,n,s,q);q=[];n[s]+=1;}}}},getStoringLayout:function(j){return new i({grid:this._grid,isStarred:this.isStarred,isFixed:this.isFixed,renderStarred:function(k,l,m,n){j.push(n);},renderNonStarred:function(k,l,m,n){j.push(n[0]);if(n.length>1)j.push(n[1]);}});},reorder:function(j,k,l,m){var n=[];this.getStoringLayout(n).layoutReorder(j,k,l,m);return n;},canonicalize:function(j){var k=[];this.getStoringLayout(k).layout(j);return k;}});e.exports=i;});
__d("StarGrid",["event-extensions","Arbiter","AsyncRequest","CSS","DataStore","DOM","ImageUtils","Locale","Parent","Style","StarGridLayout","copyProperties"],function(a,b,c,d,e,f){b('event-extensions');var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DataStore'),k=b('DOM'),l=b('ImageUtils'),m=b('Locale'),n=b('Parent'),o=b('Style'),p=b('StarGridLayout'),q=b('copyProperties'),r={MARGIN:5,isStarred:function(s){return i.hasClass(s,'fbPhotoStarGridStarred');},isFixed:function(s){return i.hasClass(s,'fbPhotoStarGridFixed');},setPosition:function(s,t,u){var v=m.isRTL()?'margin-right':'margin-left';o.set(s,'position','absolute');o.set(s,'margin-top',t+'px');o.set(s,v,u+'px');},renderNonStarred:function(s,t,u,v){for(var w=0;w<v.length;++w){var x=t[u]*r.getSize(s),y=(u*2+w)*r.getSize(s);r.setPosition(v[w],x,y);}},renderStarred:function(s,t,u,v){var w=t[u]*r.getSize(s),x=u*2*r.getSize(s);r.setPosition(v,w,x);},mergeWithPreviousGrid:function(s){var t=s.previousSibling;if(t&&i.hasClass(t,'fbStarGrid')){while(s.firstChild)t.appendChild(s.firstChild);k.remove(s);s=t;}return s;},removePhoto:function(s){var t=k.scry(document.body,'.fbPhotoStarGridElement[data-fbid="'+s+'"]')[0],u=n.byClass(t,'fbStarGrid');k.remove(t);r.layoutGrid(u,r.getElements(u));},layoutGrid:function(s,t){var u=new p({_grid:s,isStarred:r.isStarred,isFixed:r.isFixed,renderNonStarred:r.renderNonStarred,renderStarred:r.renderStarred});r.setElements(s,t);g.inform('StarGrid/UPDATE',t);var v=u.layout(t);o.set(s,'width',(v.x*r.getSize(s))+'px');o.set(s,'height',(v.y*r.getSize(s))+'px');},mergeAndLayoutGrid:function(s,t){s=r.mergeWithPreviousGrid(s);j.set(s,'size',t);r.layoutGrid(s,k.scry(s,'.fbPhotoStarGridElement'));},getSize:function(s){return j.get(s,'size');},updateBackground:function(s,t){var u;function v(){o.set(s,'backgroundImage','url('+t+')');window.clearTimeout(u);}var w=new Image();w.onload=v;w.src=t;function x(){if(l.hasLoaded(w)){v();}else x.defer(100);}u=x.defer();},setStarred:function(s,t,u,v){var w=n.byClass(t,'fbPhotoStarGridElement');i.conditionClass(w,'fbPhotoStarGridStarred',v);i.conditionClass(w,'fbPhotoStarGridNonStarred',!v);var x=k.scry(w,'.uiMediaThumb i')[0]||k.scry(w,'.uiVideoLink i')[0],y=w.getAttribute(v?'data-starred-src':'data-non-starred-src');this.updateBackground(x,y);var z=r.getSize(s)*(v?2:1)-r.MARGIN;o.set(x,'width',z+'px');o.set(x,'height',z+'px');var s=n.byClass(w,'fbStarGrid');r.layoutGrid(s,r.getElements(s));},addClickListener:function(s){Event.listen(s,'click',function(event){var t=n.byClass(event.target||event.srcElement,'fbPhotoStarButton');if(!t)return;var u=n.byClass(t,'fbPhotoStarGridElement'),v=n.byClass(u,'fbStarGrid'),w=u.getAttribute('data-fbid'),x=r.isStarred(u);r.setStarred(v,t,w,!x);new h().setMethod('POST').setURI('/ajax/photos/photo/star.php').setData({fbid:w,value:!x}).setErrorHandler(function(){r.setStarred(v,t,w,x);}).send();return false;});g.subscribe('BulkTagger.SHOW',function(){i.addClass(s,'uiMediaThumbNoOverlay');});g.subscribe('BulkTagger.HIDE',function(){i.removeClass(s,'uiMediaThumbNoOverlay');});}};q(r,{getElements:function(s){var t=j.get(s,'elements');if(!t){t=k.scry(s,'div.fbPhotoStarGridElement');r.setElements(s,t);}return t;},setElements:function(s,t){j.set(s,'elements',t);}});e.exports=r;});
__d("PhotoMultiPhotosThumb",["event-extensions","function-extensions","Style"],function(a,b,c,d,e,f){b('event-extensions');b('function-extensions');var g=b('Style'),h=1200,i={init:function(j,k){var l=null,m=0;function n(p){m=p;k.forEach(function(q,r){g.set(q,'opacity',r===p?1:0);});}function o(){n((m+1)%k.length);l=o.defer(h);}Event.listen(j,'mouseenter',function(){m=0;o();});Event.listen(j,'mouseleave',function(){n(0);window.clearTimeout(l);});}};e.exports=i;});